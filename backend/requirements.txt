# Microsoft Fabric Embedded App - Backend Dependencies
# Python 3.9+ required

# ============================================================================
# CORE FRAMEWORK
# ============================================================================
fastapi==0.104.1                    # Modern, fast web framework
uvicorn[standard]==0.24.0           # ASGI server with performance extras
pydantic==2.5.0                     # Data validation using Python type hints
pydantic-settings==2.1.0            # Settings management for Pydantic

# ============================================================================
# MICROSOFT AUTHENTICATION & APIS
# ============================================================================
msal==1.25.0                        # Microsoft Authentication Library
azure-identity==1.15.0              # Azure authentication library
azure-keyvault-secrets==4.7.0       # Azure Key Vault secrets client
azure-core==1.29.5                  # Azure core library
azure-storage-blob==12.19.0         # Azure Blob Storage (if needed)

# ============================================================================
# HTTP CLIENT & API CALLS
# ============================================================================
httpx==0.25.2                       # Modern async HTTP client
requests==2.31.0                    # Synchronous HTTP library (fallback)
aiohttp==3.9.1                      # Async HTTP client/server

# ============================================================================
# DATABASE (OPTIONAL)
# ============================================================================
sqlalchemy==2.0.23                  # SQL toolkit and ORM
alembic==1.13.0                     # Database migration tool
asyncpg==0.29.0                     # Async PostgreSQL driver
psycopg2-binary==2.9.9              # PostgreSQL adapter (sync fallback)

# ============================================================================
# CACHING & PERFORMANCE
# ============================================================================
redis==5.0.1                        # Redis client for caching
hiredis==2.2.3                      # High performance Redis parser
aiocache==0.12.2                    # Async caching framework

# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================
python-jose[cryptography]==3.3.0    # JWT token handling
passlib[bcrypt]==1.7.4              # Password hashing (if needed)
cryptography==41.0.8                # Cryptographic recipes
python-multipart==0.0.6             # Form data parsing

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
structlog==23.2.0                   # Structured logging
opencensus-ext-azure==1.1.13        # Azure Application Insights
opencensus-ext-requests==0.8.0      # Request tracing
python-json-logger==2.0.7           # JSON formatted logging

# ============================================================================
# UTILITIES & HELPERS
# ============================================================================
python-dotenv==1.0.0                # Environment variable loading
click==8.1.7                        # Command line interface creation
rich==13.7.0                        # Rich text and beautiful formatting
tenacity==8.2.3                     # Retry library
email-validator==2.1.0              # Email validation

# ============================================================================
# DATE & TIME
# ============================================================================
python-dateutil==2.8.2              # Date utilities
pytz==2023.3                        # Timezone definitions

# ============================================================================
# VALIDATION & SERIALIZATION
# ============================================================================
marshmallow==3.20.1                 # Object serialization/deserialization
phonenumbers==8.13.25               # Phone number parsing and validation

# ============================================================================
# DEVELOPMENT & TESTING
# ============================================================================
pytest==7.4.3                       # Testing framework
pytest-asyncio==0.21.1              # Async testing support
pytest-cov==4.1.0                   # Coverage plugin for pytest
pytest-mock==3.12.0                 # Mock plugin for pytest
httpx-mock==0.10.0                  # HTTP mocking for tests
factory-boy==3.3.0                  # Test data generation
faker==20.1.0                       # Fake data generation

# ============================================================================
# CODE QUALITY & FORMATTING
# ============================================================================
black==23.11.0                      # Code formatter
isort==5.12.0                       # Import sorting
flake8==6.1.0                       # Linting
mypy==1.7.1                         # Static type checker
bandit==1.7.5                       # Security linter
pre-commit==3.6.0                   # Git pre-commit hooks

# ============================================================================
# DOCUMENTATION
# ============================================================================
mkdocs==1.5.3                       # Documentation generator
mkdocs-material==9.4.8              # Material theme for MkDocs

# ============================================================================
# POWERBI & FABRIC SPECIFIC
# ============================================================================
# Note: Microsoft doesn't provide official Python SDK for PowerBI REST API
# We'll use direct HTTP calls with the libraries above

# ============================================================================
# PRODUCTION DEPENDENCIES
# ============================================================================
gunicorn==21.2.0                    # WSGI HTTP Server (alternative to uvicorn)
prometheus-client==0.19.0           # Metrics collection
sentry-sdk[fastapi]==1.38.0         # Error tracking and performance monitoring

# ============================================================================
# OPTIONAL: ADVANCED FEATURES
# ============================================================================
celery==5.3.4                       # Distributed task queue (if background jobs needed)
flower==2.0.1                       # Celery monitoring tool
schedule==1.2.0                     # Job scheduling library

# ============================================================================
# DEPENDENCY MANAGEMENT
# ============================================================================
# Use pip-tools for dependency management:
# pip install pip-tools
# pip-compile requirements.in  # Generate requirements.txt from requirements.in
# pip-sync requirements.txt    # Install exact versions

# ============================================================================
# SECURITY NOTES
# ============================================================================
# - All dependencies should be pinned to specific versions for security
# - Regularly update dependencies and check for vulnerabilities
# - Use tools like safety: pip install safety && safety check
# - Consider using dependabot for automated dependency updates
#
# To check for security vulnerabilities:
# pip install safety
# safety check --json
#
# To audit packages:
# pip-audit
#
# ============================================================================